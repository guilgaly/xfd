package xfd.integration.in.jenkins

import spray.json._
import xfd.integration.in.jenkins.model.BuildWithDetails

object Test extends App with JsonSupport {
  val json =
    """{"_class":"hudson.model.FreeStyleProject","actions":[{},{},{"_class":"hudson.plugins.jobConfigHistory.JobConfigHistoryProjectAction"},{},{"_class":"com.cloudbees.plugins.credentials.ViewCredentialsAction"}],"description":"A chaque update de PR sur Bitbucket, lance le build front & back ainsi que la compilation des tests.","displayName":"xfd-dummy-project","displayNameOrNull":null,"fullDisplayName":"xfd-dummy-project","fullName":"xfd-dummy-project","name":"xfd-dummy-project","url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/","buildable":true,"builds":[{"_class":"hudson.model.FreeStyleBuild","number":7,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/7/"},{"_class":"hudson.model.FreeStyleBuild","number":6,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/6/"},{"_class":"hudson.model.FreeStyleBuild","number":5,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/5/"},{"_class":"hudson.model.FreeStyleBuild","number":4,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/4/"},{"_class":"hudson.model.FreeStyleBuild","number":3,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/3/"},{"_class":"hudson.model.FreeStyleBuild","number":2,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/2/"}],"color":"blue","firstBuild":{"_class":"hudson.model.FreeStyleBuild","number":2,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/2/"},"healthReport":[{"description":"Build stability: 3 out of the last 5 builds failed.","iconClassName":"icon-health-20to39","iconUrl":"health-20to39.png","score":40}],"inQueue":true,"keepDependencies":false,"lastBuild":{"_class":"hudson.model.FreeStyleBuild","number":7,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/7/"},"lastCompletedBuild":{"_class":"hudson.model.FreeStyleBuild","number":7,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/7/"},"lastFailedBuild":{"_class":"hudson.model.FreeStyleBuild","number":6,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/6/"},"lastStableBuild":{"_class":"hudson.model.FreeStyleBuild","number":7,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/7/"},"lastSuccessfulBuild":{"_class":"hudson.model.FreeStyleBuild","number":7,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/7/"},"lastUnstableBuild":null,"lastUnsuccessfulBuild":{"_class":"hudson.model.FreeStyleBuild","number":6,"url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/6/"},"nextBuildNumber":8,"property":[{"_class":"jenkins.model.BuildDiscarderProperty"}],"queueItem":{"_class":"hudson.model.Queue$WaitingItem","blocked":false,"buildable":false,"id":138,"inQueueSince":1512132357237,"params":"","stuck":false,"task":{"_class":"hudson.model.FreeStyleProject","name":"xfd-dummy-project","url":"https://jenkins.znx.fr/view/Zengularity/job/xfd-dummy-project/"},"url":"queue/item/138/","why":"In the quiet period. Expires in 3.3 sec","timestamp":1512132362237},"concurrentBuild":false,"downstreamProjects":[],"scm":{"_class":"hudson.plugins.git.GitSCM"},"upstreamProjects":[]}"""

  println(json.parseJson.convertTo[BuildWithDetails])

}
